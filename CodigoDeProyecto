CREATE TABLE CANCION(
ID_CANCION INTEGER,
TITULO VARCHAR2(120),
AUTOR VARCHAR2(120),
DURACION VARCHAR2(5),
CONSTRAINT PK_ID_CANCION PRIMARY KEY(ID_CANCION));

CREATE SEQUENCE SEC_CANCION
START WITH 1
INCREMENT BY 1
NOMAXVALUE;

CREATE TABLE GENERO(
ID_GENERO INTEGER,
ID_CANCION INTEGER,
NOMBRE_GEN VARCHAR2(120),
DESCRIPCION VARCHAR2(250),
CONSTRAINT PK_ID_GENERO PRIMARY KEY(ID_GENERO),
CONSTRAINT FK_ID_CANCION FOREIGN KEY(ID_CANCION) REFERENCES CANCION(ID_CANCION));

CREATE SEQUENCE SECU_GENERO
START WITH 1
INCREMENT BY 1
NOMAXVALUE;

CREATE TABLE EVENTO(
ID_EVENTO INTEGER,
ID_CANCION INTEGER,
TIPO_EVEN INTEGER,
DESCRIPCION VARCHAR2(250),
CONSTRAINT PK_ID_EVENTO PRIMARY KEY (ID_EVENTO),
CONSTRAINT FK1_ID_CANCION FOREIGN KEY (ID_CANCION) REFERENCES CANCION(ID_CANCION)); 

CREATE SEQUENCE SEC_EVENTO
START WITH 1
INCREMENT BY 1
NOMAXVALUE;

SELECT * FROM CANCION;
SELECT * FROM GENERO;
SELECT * FROM EVENTO;

CREATE OR REPLACE PROCEDURE GUARDAR_CANCION(
MY_ID_CANCION OUT INTEGER,
MY_TITULO IN VARCHAR2,
MY_AUTOR IN VARCHAR2,
MY_DURACION VARCHAR2)
AS 
BEGIN
SELECT SEC_CANCION.NEXTVAL INTO MY_ID_CANCION FROM DUAL;
INSERT INTO CANCION VALUES(
MY_ID_CANCION,
MY_TITULO,
MY_AUTOR,
MY_DURACION);
END;
/

CREATE OR REPLACE PROCEDURE ACTUALIZAR_CANCION(
MY_TITULO IN VARCHAR2,
MY_AUTOR IN VARCHAR2,
MY_DURACION IN VARCHAR2)
AS
BEGIN
UPDATE CANCION SET AUTOR=MY_AUTOR WHERE TITULO=MY_TITULO;
END;
/

CREATE OR REPLACE PROCEDURE GUARDAR_GENERO(
MY_ID_GENERO OUT INTEGER,
MY_ID_CANCION OUT INTEGER,
MY_NOMBRE_GEN IN VARCHAR2,
MY_DESCRIPCION IN VARCHAR2)
AS 
BEGIN
SELECT SECU_GENERO.NEXTVAL INTO MY_ID_GENERO FROM DUAL;
INSERT INTO GENERO VALUES(
MY_ID_GENERO,
MY_ID_CANCION,
MY_NOMBRE_GEN,
MY_DESCRIPCION);
END;
/

CREATE OR REPLACE PROCEDURE ACTUALIZAR_GENERO(
MY_NOMBRE_GEN IN VARCHAR2,
MY_DESCRIPCION IN VARCHAR2)
AS
BEGIN
UPDATE GENERO SET DESCRIPCION=MY_DESCRIPCION WHERE NOMBRE_GEN=MY_NOMBRE_GEN;
END;
/

CREATE OR REPLACE PROCEDURE GUARDAR_EVENTO(
MY_ID_EVENTO OUT INTEGER,
MY_ID_CANCION OUT INTEGER,
MY_TIPO_EVEN IN VARCHAR2,
MY_DESCRIPCION IN VARCHAR2)
AS 
BEGIN
SELECT SEC_EVENTO.NEXTVAL INTO MY_ID_EVENTO FROM DUAL;
INSERT INTO EVENTO VALUES(
MY_ID_EVENTO,
MY_ID_CANCION,
MY_TIPO_EVEN,
MY_DESCRIPCION);
END;
/
